

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Modelling a Hospital &mdash; MetaWards Documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/custom.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Part 8 - Creating your own models / networks" href="../index_part08.html" />
    <link rel="prev" title="Named Disease Stages" href="05_named_stages.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html">
          

          
            
            <img src="../../_static/logo.jpg" class="logo" alt="Logo"/>
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
  <div id="version_box"></div>
</div>


          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../features.html">Features</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../install.html">Installation instructions</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../model_data.html">Model data</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../quickstart/index.html">Quick Start Guide</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Tutorial</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../index_part01.html">Part 1 - Modelling outbreaks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index_part02.html">Part 2 - Refining the model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index_part03.html">Part 3 - Customising the outbreak</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index_part04.html">Part 4 - Customising the output</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index_part05.html">Part 5 - Modelling multiple demographics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index_part06.html">Part 6 - Moving between demographics</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index_part07.html">Part 7 - Different pathways for different demographics</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="01_pathways.html">Disease pathways and stages</a></li>
<li class="toctree-l3"><a class="reference internal" href="02_scanning.html">Scanning demographics</a></li>
<li class="toctree-l3"><a class="reference internal" href="03_conditional.html">Conditional Pathways</a></li>
<li class="toctree-l3"><a class="reference internal" href="04_icu.html">Modelling the ICU</a></li>
<li class="toctree-l3"><a class="reference internal" href="05_named_stages.html">Named Disease Stages</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Modelling a Hospital</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#disease-files">Disease files</a></li>
<li class="toctree-l4"><a class="reference internal" href="#demographics">Demographics</a></li>
<li class="toctree-l4"><a class="reference internal" href="#mixers-movers-and-extractors">Mixers, movers and extractors</a></li>
<li class="toctree-l4"><a class="reference internal" href="#running-the-job">Running the job</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../index_part08.html">Part 8 - Creating your own models / networks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index_part09.html">Part 9 - Advanced Moves and Scenarios</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../fileformats/index.html">Input files and formats</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cluster_usage.html">Running on a cluster</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../support.html">Help and support</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devsupport.html">Developer Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../roadmap.html">Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../packaging.html">Packaging releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development.html">Developer’s guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../snaglist.html">Snag list</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../api/index.html">Documentation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html">Changelog</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../acknowledgements.html">Acknowledgements</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">MetaWards</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">Tutorial</a> &raquo;</li>
        
          <li><a href="../index_part07.html">Part 7 - Different pathways for different demographics</a> &raquo;</li>
        
      <li>Modelling a Hospital</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="../index_part08.html" class="btn btn-neutral float-right" title="Part 8 - Creating your own models / networks" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
      
      
        <a href="05_named_stages.html" class="btn btn-neutral float-left" title="Named Disease Stages" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="modelling-a-hospital">
<h1>Modelling a Hospital<a class="headerlink" href="#modelling-a-hospital" title="Permalink to this headline">¶</a></h1>
<p>Now you’ve seen how to use and name different disease stages, we can
put all of this together to fully model a hospital.</p>
<div class="section" id="disease-files">
<h2>Disease files<a class="headerlink" href="#disease-files" title="Permalink to this headline">¶</a></h2>
<p>First, we will create a set of disease files for the different demographics;</p>
<p>First, <code class="docutils literal notranslate"><span class="pre">lurgy_home.json</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;stage&quot;</span>            <span class="p">:</span> <span class="p">[</span> <span class="s2">&quot;E1&quot;</span><span class="p">,</span> <span class="s2">&quot;E2&quot;</span><span class="p">,</span> <span class="s2">&quot;I1&quot;</span><span class="p">,</span> <span class="s2">&quot;I2&quot;</span><span class="p">,</span> <span class="s2">&quot;I3&quot;</span><span class="p">,</span> <span class="s2">&quot;R&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;beta&quot;</span>             <span class="p">:</span> <span class="p">[</span>  <span class="mf">0.0</span><span class="p">,</span>  <span class="mf">0.0</span><span class="p">,</span>  <span class="mf">0.2</span><span class="p">,</span>  <span class="mf">0.5</span><span class="p">,</span>  <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.0</span> <span class="p">],</span>
    <span class="s2">&quot;progress&quot;</span>         <span class="p">:</span> <span class="p">[</span>  <span class="mf">1.0</span><span class="p">,</span>  <span class="mf">1.0</span><span class="p">,</span>  <span class="mf">0.2</span><span class="p">,</span>  <span class="mf">0.5</span><span class="p">,</span>  <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.0</span> <span class="p">],</span>
    <span class="s2">&quot;too_ill_to_move&quot;</span>  <span class="p">:</span> <span class="p">[</span>  <span class="mf">0.0</span><span class="p">,</span>  <span class="mf">0.0</span><span class="p">,</span>  <span class="mf">0.0</span><span class="p">,</span>  <span class="mf">0.5</span><span class="p">,</span>  <span class="mf">0.8</span><span class="p">,</span> <span class="mf">1.0</span> <span class="p">],</span>
    <span class="s2">&quot;contrib_foi&quot;</span>      <span class="p">:</span> <span class="p">[</span>  <span class="mf">1.0</span><span class="p">,</span>  <span class="mf">1.0</span><span class="p">,</span>  <span class="mf">1.0</span><span class="p">,</span>  <span class="mf">1.0</span><span class="p">,</span>  <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span> <span class="p">],</span>
    <span class="s2">&quot;start_symptom&quot;</span>    <span class="p">:</span> <span class="mi">3</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This is the same as <code class="docutils literal notranslate"><span class="pre">lurgy4.json</span></code> except we have now named the individual
disease stages. This will be used to model the disease in the general
population and in hospital staff.</p>
<p>Next, <code class="docutils literal notranslate"><span class="pre">lurgy_hospital.json</span></code>, used to model hospital patients;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;stage&quot;</span>            <span class="p">:</span> <span class="p">[</span> <span class="s2">&quot;H1&quot;</span><span class="p">,</span> <span class="s2">&quot;H2&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;beta&quot;</span>             <span class="p">:</span> <span class="p">[</span>  <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.2</span>  <span class="p">],</span>
    <span class="s2">&quot;progress&quot;</span>         <span class="p">:</span> <span class="p">[</span>  <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.2</span>  <span class="p">],</span>
    <span class="s2">&quot;too_ill_to_move&quot;</span>  <span class="p">:</span> <span class="p">[</span>  <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span>  <span class="p">],</span>
    <span class="s2">&quot;contrib_foi&quot;</span>      <span class="p">:</span> <span class="p">[</span>  <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span>  <span class="p">],</span>
    <span class="s2">&quot;start_symptom&quot;</span>    <span class="p">:</span> <span class="mi">1</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Next, <code class="docutils literal notranslate"><span class="pre">lurgy_icu.json</span></code>, used to model intensive care patients;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;stage&quot;</span>            <span class="p">:</span> <span class="p">[</span> <span class="s2">&quot;ICU&quot;</span><span class="p">,</span> <span class="s2">&quot;R&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;beta&quot;</span>             <span class="p">:</span> <span class="p">[</span>  <span class="mf">0.2</span><span class="p">,</span>  <span class="mf">0.0</span> <span class="p">],</span>
    <span class="s2">&quot;progress&quot;</span>         <span class="p">:</span> <span class="p">[</span>  <span class="mf">0.2</span><span class="p">,</span>  <span class="mf">0.0</span> <span class="p">],</span>
    <span class="s2">&quot;too_ill_to_move&quot;</span>  <span class="p">:</span> <span class="p">[</span>  <span class="mf">1.0</span><span class="p">,</span>  <span class="mf">1.0</span> <span class="p">],</span>
    <span class="s2">&quot;contrib_foi&quot;</span>      <span class="p">:</span> <span class="p">[</span>  <span class="mf">1.0</span><span class="p">,</span>  <span class="mf">0.0</span> <span class="p">],</span>
    <span class="s2">&quot;start_symptom&quot;</span>    <span class="p">:</span> <span class="mi">1</span>
<span class="p">}</span>
</pre></div>
</div>
<p>And, finally, we need to have an overall disease file that defines the
stages that we want to use for mapping. This just names the mapping
stages, in the order we want to see them reported. This is in
<code class="docutils literal notranslate"><span class="pre">lurgy_overall.json</span></code>;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="s2">&quot;stage&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="s2">&quot;E&quot;</span><span class="p">,</span> <span class="s2">&quot;I&quot;</span><span class="p">,</span> <span class="s2">&quot;H&quot;</span><span class="p">,</span> <span class="s2">&quot;ICU&quot;</span><span class="p">,</span> <span class="s2">&quot;R&quot;</span><span class="p">]</span> <span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We don’t need to set any disease parameters as these are set by the
disease files used by the different demographics.</p>
</div>
</div>
<div class="section" id="demographics">
<h2>Demographics<a class="headerlink" href="#demographics" title="Permalink to this headline">¶</a></h2>
<p>Next, we need to update the <code class="docutils literal notranslate"><span class="pre">demographics.json</span></code> file to read;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;demographics&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="s2">&quot;home&quot;</span><span class="p">,</span> <span class="s2">&quot;staff&quot;</span><span class="p">,</span> <span class="s2">&quot;patients&quot;</span><span class="p">,</span> <span class="s2">&quot;icu&quot;</span><span class="p">],</span>
    <span class="s2">&quot;work_ratios&quot;</span>  <span class="p">:</span> <span class="p">[</span> <span class="mf">0.99</span><span class="p">,</span>   <span class="mf">0.01</span><span class="p">,</span>     <span class="mf">0.00</span><span class="p">,</span>     <span class="mf">0.00</span> <span class="p">],</span>
    <span class="s2">&quot;play_ratios&quot;</span>  <span class="p">:</span> <span class="p">[</span> <span class="mf">1.00</span><span class="p">,</span>   <span class="mf">0.00</span><span class="p">,</span>     <span class="mf">0.00</span><span class="p">,</span>     <span class="mf">0.00</span> <span class="p">],</span>
    <span class="s2">&quot;diseases&quot;</span>     <span class="p">:</span> <span class="p">[</span> <span class="s2">&quot;lurgy_home&quot;</span><span class="p">,</span> <span class="s2">&quot;lurgy_home&quot;</span><span class="p">,</span>
                       <span class="s2">&quot;lurgy_hospital&quot;</span><span class="p">,</span> <span class="s2">&quot;lurgy_icu&quot;</span> <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Here, we’ve set the <code class="docutils literal notranslate"><span class="pre">home</span></code> and <code class="docutils literal notranslate"><span class="pre">staff</span></code> demographics to use <code class="docutils literal notranslate"><span class="pre">lurgy_home</span></code>,
while <code class="docutils literal notranslate"><span class="pre">patients</span></code> will use <code class="docutils literal notranslate"><span class="pre">lurgy_hospital</span></code> and <code class="docutils literal notranslate"><span class="pre">icu</span></code> will use
<code class="docutils literal notranslate"><span class="pre">lurgy_icu</span></code>.</p>
</div>
<div class="section" id="mixers-movers-and-extractors">
<h2>Mixers, movers and extractors<a class="headerlink" href="#mixers-movers-and-extractors" title="Permalink to this headline">¶</a></h2>
<p>We can use the same mixer as before, e.g. <code class="docutils literal notranslate"><span class="pre">mix_hospital.py</span></code> should be;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">metawards.mixers</span> <span class="kn">import</span> <span class="n">merge_using_matrix</span>

<span class="k">def</span> <span class="nf">mix_shield</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">matrix</span> <span class="o">=</span> <span class="p">[</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
               <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">],</span>
               <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
               <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]</span> <span class="p">]</span>

    <span class="n">network</span><span class="o">.</span><span class="n">demographics</span><span class="o">.</span><span class="n">interaction_matrix</span> <span class="o">=</span> <span class="n">matrix</span>

    <span class="k">return</span> <span class="p">[</span><span class="n">merge_using_matrix</span><span class="p">]</span>
</pre></div>
</div>
<p>We can use the same mover as before, except we can now take advantage
of the named disease stages to specify the moves using demographic and
disease name. This is significantly less error-prone than using indexes,
e.g. update <code class="docutils literal notranslate"><span class="pre">move_hospital.py</span></code> to read;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">metawards.movers</span> <span class="kn">import</span> <span class="n">go_stage</span>


<span class="k">def</span> <span class="nf">move_hospital</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="c1"># move 20% of I2 home/staff population to H1 patients</span>
    <span class="n">func1</span> <span class="o">=</span> <span class="k">lambda</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">go_stage</span><span class="p">(</span><span class="n">go_from</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;home&quot;</span><span class="p">,</span> <span class="s2">&quot;staff&quot;</span><span class="p">],</span>
                                      <span class="n">go_to</span><span class="o">=</span><span class="s2">&quot;patients&quot;</span><span class="p">,</span>
                                      <span class="n">from_stage</span><span class="o">=</span><span class="s2">&quot;I2&quot;</span><span class="p">,</span>
                                      <span class="n">to_stage</span><span class="o">=</span><span class="s2">&quot;H1&quot;</span><span class="p">,</span>
                                      <span class="n">fraction</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span>
                                      <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="c1"># move 10% of H2 patients to ICU1 ICU</span>
    <span class="n">func2</span> <span class="o">=</span> <span class="k">lambda</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">go_stage</span><span class="p">(</span><span class="n">go_from</span><span class="o">=</span><span class="s2">&quot;patients&quot;</span><span class="p">,</span>
                                      <span class="n">go_to</span><span class="o">=</span><span class="s2">&quot;icu&quot;</span><span class="p">,</span>
                                      <span class="n">from_stage</span><span class="o">=</span><span class="s2">&quot;H2&quot;</span><span class="p">,</span>
                                      <span class="n">to_stage</span><span class="o">=</span><span class="s2">&quot;ICU&quot;</span><span class="p">,</span>
                                      <span class="n">fraction</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>
                                       <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="c1"># move the remainder of H2 patients to home R</span>
    <span class="n">func3</span> <span class="o">=</span> <span class="k">lambda</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">go_stage</span><span class="p">(</span><span class="n">go_from</span><span class="o">=</span><span class="s2">&quot;patients&quot;</span><span class="p">,</span>
                                      <span class="n">go_to</span><span class="o">=</span><span class="s2">&quot;home&quot;</span><span class="p">,</span>
                                      <span class="n">from_stage</span><span class="o">=</span><span class="s2">&quot;H2&quot;</span><span class="p">,</span>
                                      <span class="n">to_stage</span><span class="o">=</span><span class="s2">&quot;R&quot;</span><span class="p">,</span>
                                      <span class="n">fraction</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
                                      <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="c1"># move R ICU and H2 patients to home R</span>
    <span class="n">func4</span> <span class="o">=</span> <span class="k">lambda</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">go_stage</span><span class="p">(</span><span class="n">go_from</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;patients&quot;</span><span class="p">,</span> <span class="s2">&quot;icu&quot;</span><span class="p">],</span>
                                      <span class="n">go_to</span><span class="o">=</span><span class="s2">&quot;home&quot;</span><span class="p">,</span>
                                      <span class="n">from_stage</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;H2&quot;</span><span class="p">,</span> <span class="s2">&quot;R&quot;</span><span class="p">],</span>
                                      <span class="n">to_stage</span><span class="o">=</span><span class="s2">&quot;R&quot;</span><span class="p">,</span>
                                      <span class="n">fraction</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
                                      <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">return</span> <span class="p">[</span><span class="n">func1</span><span class="p">,</span> <span class="n">func2</span><span class="p">,</span> <span class="n">func3</span><span class="p">,</span> <span class="n">func4</span><span class="p">]</span>
</pre></div>
</div>
<p>As for the extractor, well we don’t really need to use it now as the
data for each stage will be written already into the summary and
individual output files.</p>
</div>
<div class="section" id="running-the-job">
<h2>Running the job<a class="headerlink" href="#running-the-job" title="Permalink to this headline">¶</a></h2>
<p>Run <code class="docutils literal notranslate"><span class="pre">metawards</span></code> using;</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>metawards -D demographics.json -d lurgy_overall --mixer mix_hospital --mover move_hospital -a ExtraSeedsLondon.dat --nsteps <span class="m">40</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We’ve limited here to running just 40 steps to enable a quick demonstration.
Feel free to run the full model if you have time.</p>
</div>
<p>You should see that statistics for the mapped disease stages for all of the
demographics are written nicely to the screen, e.g.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ Day 36 ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
S: 56079510  E: 632  I: 1246  H: 117  ICU: 7  R: 565  IW: 509  POPULATION: 56082077
┏━━━━━━━━━━┳━━━━━━━━━━┳━━━━━┳━━━━━━┳━━━━━┳━━━━━┳━━━━━┳━━━━━┳━━━━━━━━━━━━┓
┃          ┃    S     ┃  E  ┃  I   ┃  H  ┃ ICU ┃  R  ┃ IW  ┃ POPULATION ┃
┡━━━━━━━━━━╇━━━━━━━━━━╇━━━━━╇━━━━━━╇━━━━━╇━━━━━╇━━━━━╇━━━━━╇━━━━━━━━━━━━┩
│   home   │ 55975294 │ 626 │ 1240 │     │     │ 560 │ 298 │  55977720  │
│  staff   │  104216  │  6  │  6   │     │     │  5  │  1  │   104233   │
│ patients │    0     │     │      │ 117 │     │     │ 86  │    117     │
│   icu    │    0     │     │      │     │  7  │  0  │  7  │     7      │
├──────────┼──────────┼─────┼──────┼─────┼─────┼─────┼─────┼────────────┤
│  total   │ 56079510 │ 632 │ 1246 │ 117 │  7  │ 565 │ 509 │  56082077  │
└──────────┴──────────┴─────┴──────┴─────┴─────┴─────┴─────┴────────────┘
Number of infections: 2002

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ Day 37 ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
S: 56079060  E: 795  I: 1415  H: 148  ICU: 6  R: 653  IW: 622  POPULATION: 56082077
┏━━━━━━━━━━┳━━━━━━━━━━┳━━━━━┳━━━━━━┳━━━━━┳━━━━━┳━━━━━┳━━━━━┳━━━━━━━━━━━━┓
┃          ┃    S     ┃  E  ┃  I   ┃  H  ┃ ICU ┃  R  ┃ IW  ┃ POPULATION ┃
┡━━━━━━━━━━╇━━━━━━━━━━╇━━━━━╇━━━━━━╇━━━━━╇━━━━━╇━━━━━╇━━━━━╇━━━━━━━━━━━━┩
│   home   │ 55974849 │ 789 │ 1405 │     │     │ 645 │ 381 │  55977688  │
│  staff   │  104211  │  6  │  10  │     │     │  6  │  5  │   104233   │
│ patients │    0     │     │      │ 148 │     │     │ 103 │    148     │
│   icu    │    0     │     │      │     │  6  │  2  │  6  │     8      │
├──────────┼──────────┼─────┼──────┼─────┼─────┼─────┼─────┼────────────┤
│  total   │ 56079060 │ 795 │ 1415 │ 148 │  6  │ 653 │ 622 │  56082077  │
└──────────┴──────────┴─────┴──────┴─────┴─────┴─────┴─────┴────────────┘
Number of infections: 2364

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ Day 38 ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
S: 56078586  E: 924  I: 1625  H: 168  ICU: 9  R: 765  IW: 696  POPULATION: 56082077
┏━━━━━━━━━━┳━━━━━━━━━━┳━━━━━┳━━━━━━┳━━━━━┳━━━━━┳━━━━━┳━━━━━┳━━━━━━━━━━━━┓
┃          ┃    S     ┃  E  ┃  I   ┃  H  ┃ ICU ┃  R  ┃ IW  ┃ POPULATION ┃
┡━━━━━━━━━━╇━━━━━━━━━━╇━━━━━╇━━━━━━╇━━━━━╇━━━━━╇━━━━━╇━━━━━╇━━━━━━━━━━━━┩
│   home   │ 55974378 │ 916 │ 1614 │     │     │ 758 │ 392 │  55977666  │
│  staff   │  104208  │  8  │  11  │     │     │  6  │  3  │   104233   │
│ patients │    0     │     │      │ 168 │     │     │ 115 │    168     │
│   icu    │    0     │     │      │     │  9  │  1  │  9  │     10     │
├──────────┼──────────┼─────┼──────┼─────┼─────┼─────┼─────┼────────────┤
│  total   │ 56078586 │ 924 │ 1625 │ 168 │  9  │ 765 │ 696 │  56082077  │
└──────────┴──────────┴─────┴──────┴─────┴─────┴─────┴─────┴────────────┘
Number of infections: 2726

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ Day 39 ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
S: 56078059  E: 1001  I: 1914  H: 189  ICU: 11  R: 903  IW: 763  POPULATION: 56082077
┏━━━━━━━━━━┳━━━━━━━━━━┳━━━━━━┳━━━━━━┳━━━━━┳━━━━━┳━━━━━┳━━━━━┳━━━━━━━━━━━━┓
┃          ┃    S     ┃  E   ┃  I   ┃  H  ┃ ICU ┃  R  ┃ IW  ┃ POPULATION ┃
┡━━━━━━━━━━╇━━━━━━━━━━╇━━━━━━╇━━━━━━╇━━━━━╇━━━━━╇━━━━━╇━━━━━╇━━━━━━━━━━━━┩
│   home   │ 55973854 │ 995  │ 1899 │     │     │ 894 │ 440 │  55977642  │
│  staff   │  104205  │  6   │  15  │     │     │  7  │  3  │   104233   │
│ patients │    0     │      │      │ 189 │     │     │ 135 │    189     │
│   icu    │    0     │      │      │     │ 11  │  2  │ 11  │     13     │
├──────────┼──────────┼──────┼──────┼─────┼─────┼─────┼─────┼────────────┤
│  total   │ 56078059 │ 1001 │ 1914 │ 189 │ 11  │ 903 │ 763 │  56082077  │
└──────────┴──────────┴──────┴──────┴─────┴─────┴─────┴─────┴────────────┘
Number of infections: 3115

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ Day 40 ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
S: 56077432  E: 1154  I: 2225  H: 210  ICU: 12  R: 1044  IW: 874  POPULATION: 56082077
┏━━━━━━━━━━┳━━━━━━━━━━┳━━━━━━┳━━━━━━┳━━━━━┳━━━━━┳━━━━━━┳━━━━━┳━━━━━━━━━━━━┓
┃          ┃    S     ┃  E   ┃  I   ┃  H  ┃ ICU ┃  R   ┃ IW  ┃ POPULATION ┃
┡━━━━━━━━━━╇━━━━━━━━━━╇━━━━━━╇━━━━━━╇━━━━━╇━━━━━╇━━━━━━╇━━━━━╇━━━━━━━━━━━━┩
│   home   │ 55973231 │ 1147 │ 2208 │     │     │ 1033 │ 525 │  55977619  │
│  staff   │  104201  │  7   │  17  │     │     │  7   │  4  │   104232   │
│ patients │    0     │      │      │ 210 │     │      │ 147 │    210     │
│   icu    │    0     │      │      │     │ 12  │  4   │ 12  │     16     │
├──────────┼──────────┼──────┼──────┼─────┼─────┼──────┼─────┼────────────┤
│  total   │ 56077432 │ 1154 │ 2225 │ 210 │ 12  │ 1044 │ 874 │  56082077  │
└──────────┴──────────┴──────┴──────┴─────┴─────┴──────┴─────┴────────────┘
Number of infections: 3601
</pre></div>
</div>
<p>Equally, you will find the individual <code class="docutils literal notranslate"><span class="pre">ICU</span></code> and <code class="docutils literal notranslate"><span class="pre">R</span></code> populations for
the <code class="docutils literal notranslate"><span class="pre">icu</span></code> demographic is <code class="docutils literal notranslate"><span class="pre">output/total_infections_icu.csv.bz2</span></code>,
and the individual populations for <code class="docutils literal notranslate"><span class="pre">H1</span></code> and <code class="docutils literal notranslate"><span class="pre">H2</span></code> in the
<code class="docutils literal notranslate"><span class="pre">patients</span></code> demographic in <code class="docutils literal notranslate"><span class="pre">output/total_infections_patients.csv.bz2</span></code>.</p>
<p>In addition, the <code class="docutils literal notranslate"><span class="pre">output/results.csv.bz2</span></code> and <code class="docutils literal notranslate"><span class="pre">output/trajectory.csv.bz2</span></code>
files record the totals in the <code class="docutils literal notranslate"><span class="pre">H</span></code> and <code class="docutils literal notranslate"><span class="pre">ICU</span></code> stages, as well as the
traditional <code class="docutils literal notranslate"><span class="pre">S</span></code>, <code class="docutils literal notranslate"><span class="pre">E</span></code>, <code class="docutils literal notranslate"><span class="pre">I</span></code> and <code class="docutils literal notranslate"><span class="pre">R</span></code>, e.g.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;output/results.csv.bz2&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
<span class="go">   fingerprint  repeat  day        date         S  E  I  H  ICU  R  IW   UV</span>
<span class="go"> 0      REPEAT       1    0  2020-06-23  56082077  0  0  0    0  0   0  1.0</span>
<span class="go"> 1      REPEAT       1    1  2020-06-24  56082072  5  0  0    0  0   1  1.0</span>
<span class="go"> 2      REPEAT       1    2  2020-06-25  56082072  0  5  0    0  0   0  1.0</span>
<span class="go"> 3      REPEAT       1    3  2020-06-26  56082071  1  5  0    0  0   1  1.0</span>
<span class="go"> 4      REPEAT       1    4  2020-06-27  56082069  3  5  0    0  0   3  1.0</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../index_part08.html" class="btn btn-neutral float-right" title="Part 8 - Creating your own models / networks" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="05_named_stages.html" class="btn btn-neutral float-left" title="Named Disease Stages" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
      <span class="lastupdated">
        Last updated on Feb 11, 2021.
      </span>

    </p>
  </div> 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>