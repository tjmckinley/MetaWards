

<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Using a Custom Network &mdash; MetaWards Documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/custom.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Specifying ward-local parameters" href="05_local_network.html" />
    <link rel="prev" title="Creating Networks in R" href="03_reticulate.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html">
          

          
            
            <img src="../../_static/logo.jpg" class="logo" alt="Logo"/>
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
  <div id="version_box"></div>
</div>


          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../features.html">Features</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../install.html">Installation instructions</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../model_data.html">Model data</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../quickstart/index.html">Quick Start Guide</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Tutorial</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../index_part01.html">Part 1 - Modelling outbreaks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index_part02.html">Part 2 - Refining the model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index_part03.html">Part 3 - Customising the outbreak</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index_part04.html">Part 4 - Customising the output</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index_part05.html">Part 5 - Modelling multiple demographics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index_part06.html">Part 6 - Moving between demographics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index_part07.html">Part 7 - Different pathways for different demographics</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index_part08.html">Part 8 - Creating your own models / networks</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="01_networks.html">Understanding the Model Network</a></li>
<li class="toctree-l3"><a class="reference internal" href="02_custom_network.html">Creating a Custom Network</a></li>
<li class="toctree-l3"><a class="reference internal" href="03_reticulate.html">Creating Networks in R</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Using a Custom Network</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#running-metawards-from-within-python-or-r">Running MetaWards from within Python or R</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="05_local_network.html">Specifying ward-local parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="06_network_demographics.html">Different networks for different demographics</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../fileformats/index.html">Input files and formats</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cluster_usage.html">Running on a cluster</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../support.html">Help and support</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devsupport.html">Developer Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../roadmap.html">Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../packaging.html">Packaging releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development.html">Developer’s guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../snaglist.html">Snag list</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../api/index.html">Documentation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html">Changelog</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../acknowledgements.html">Acknowledgements</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">MetaWards</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">Tutorial</a> &raquo;</li>
        
          <li><a href="../index_part08.html">Part 8 - Creating your own models / networks</a> &raquo;</li>
        
      <li>Using a Custom Network</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="05_local_network.html" class="btn btn-neutral float-right" title="Specifying ward-local parameters" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="03_reticulate.html" class="btn btn-neutral float-left" title="Creating Networks in R" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="using-a-custom-network">
<h1>Using a Custom Network<a class="headerlink" href="#using-a-custom-network" title="Permalink to this headline">¶</a></h1>
<p>You can run a simulation using a custom network by passing filename of
the JSON file that contains the network to <code class="docutils literal notranslate"><span class="pre">metawards</span></code> via the
<code class="docutils literal notranslate"><span class="pre">--model</span></code> or <code class="docutils literal notranslate"><span class="pre">-m</span></code> parameter.</p>
<p>For example, to use the <code class="docutils literal notranslate"><span class="pre">custom_network.json.bz2</span></code> file from the last section,
together with the <code class="docutils literal notranslate"><span class="pre">lurgy4.json</span></code> disease model from previous chapters,
and seed the outbreak with 5 infections in London on day 1
you would run;</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>metawards -d lurgy4 -m custom_network.json.bz2 -a <span class="s2">&quot;1 5 London&quot;</span>
</pre></div>
</div>
<p>You should see that the model runs very quickly, producing output similar
to;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ Day 1 ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Loading additional seeds from the command line
┏━━━━━┳━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━┓
┃ Day ┃ Demographic ┃                                   Ward                                    ┃   Number   ┃
┃     ┃             ┃                                                                           ┃   seeded   ┃
┡━━━━━╇━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━┩
│  1  │    None     │ 2 : WardInfo(name=&#39;London&#39;, alternate_names=, code=&#39;&#39;, alternate_codes=,  │     5      │
│     │             │        authority=&#39;&#39;, authority_code=&#39;&#39;, region=&#39;&#39;, region_code=&#39;&#39;)        │            │
└─────┴─────────────┴───────────────────────────────────────────────────────────────────────────┴────────────┘
seeding play_infections[0][2] += 5
S: 20345  E: 5  I: 0  R: 0  IW: 0  POPULATION: 20350
Number of infections: 5

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ Day 2 ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
S: 20345  E: 0  I: 5  R: 0  IW: 0  POPULATION: 20350
Number of infections: 5

...
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ Day 129 ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
S: 2895  E: 0  I: 1  R: 17454  IW: 0  POPULATION: 20350
Number of infections: 1

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ Day 130 ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
S: 2895  E: 0  I: 1  R: 17454  IW: 0  POPULATION: 20350
Number of infections: 1

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ Day 131 ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
S: 2895  E: 0  I: 1  R: 17454  IW: 0  POPULATION: 20350
Number of infections: 1

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ Day 132 ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
S: 2895  E: 0  I: 0  R: 17455  IW: 0  POPULATION: 20350
Number of infections: 0
Ending on day 132
</pre></div>
</div>
<div class="section" id="running-metawards-from-within-python-or-r">
<h2>Running MetaWards from within Python or R<a class="headerlink" href="#running-metawards-from-within-python-or-r" title="Permalink to this headline">¶</a></h2>
<p>It is also possible to run your custom network by passing it in directly
to the <a class="reference internal" href="../../api/generated/metawards.run.html#metawards.run" title="metawards.run"><code class="xref py py-func docutils literal notranslate"><span class="pre">metawards.run()</span></code></a> function in Python or R. For example,
in Python;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">metawards</span> <span class="kn">import</span> <span class="n">Ward</span><span class="p">,</span> <span class="n">run</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bristol</span> <span class="o">=</span> <span class="n">Ward</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Bristol&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bristol</span><span class="o">.</span><span class="n">add_workers</span><span class="p">(</span><span class="mi">500</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bristol</span><span class="o">.</span><span class="n">set_num_players</span><span class="p">(</span><span class="mi">750</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">london</span> <span class="o">=</span> <span class="n">Ward</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;London&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">london</span><span class="o">.</span><span class="n">add_workers</span><span class="p">(</span><span class="mi">8500</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">london</span><span class="o">.</span><span class="n">set_num_players</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bristol</span><span class="o">.</span><span class="n">add_workers</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span> <span class="n">destination</span><span class="o">=</span><span class="n">london</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">london</span><span class="o">.</span><span class="n">add_workers</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="n">destination</span><span class="o">=</span><span class="n">bristol</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wards</span> <span class="o">=</span> <span class="n">bristol</span> <span class="o">+</span> <span class="n">london</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">wards</span><span class="p">)</span>
<span class="go">[ Ward( info=Bristol, id=1, num_workers=1000, num_players=750 ), Ward( info=London, id=2, num_workers=8600, num_players=10000 ) ]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results</span> <span class="o">=</span> <span class="n">run</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="n">wards</span><span class="p">,</span> <span class="n">additional</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<p>This would create the wards, and then run the model. This will run in a
new directory called <code class="docutils literal notranslate"><span class="pre">output_XXXX</span></code> (where XXXX is replaced by a random
string). The <code class="docutils literal notranslate"><span class="pre">results</span></code> variable holds the full path to the resulting
<code class="docutils literal notranslate"><span class="pre">results.csv.bz2</span></code> file for this run. The arguments to
<a class="reference internal" href="../../api/generated/metawards.run.html#metawards.run" title="metawards.run"><code class="xref py py-func docutils literal notranslate"><span class="pre">metawards.run()</span></code></a> match those of the command line program. Any Python
objects (e.g. the wards, disease, demographics) can be passed in as
Python objects. They will be automatically converted to JSON files and
passed to the <code class="docutils literal notranslate"><span class="pre">metawards</span></code> processed in the background.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can use the <code class="docutils literal notranslate"><span class="pre">+</span></code> operator to add multiple individual ward objects
together to create the wards, e.g. <code class="docutils literal notranslate"><span class="pre">wards</span> <span class="pre">=</span> <span class="pre">bristol</span> <span class="pre">+</span> <span class="pre">london</span></code>.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can force <a class="reference internal" href="../../api/generated/metawards.run.html#metawards.run" title="metawards.run"><code class="xref py py-func docutils literal notranslate"><span class="pre">metawards.run()</span></code></a> to use a specified output directory
by passing in the <code class="docutils literal notranslate"><span class="pre">output</span></code> argument. You will need to set
<code class="docutils literal notranslate"><span class="pre">force_overwrite_output</span></code> to True to overwrite any existing output.
You can silence the printing to the screen by passing in
<code class="docutils literal notranslate"><span class="pre">silent</span> <span class="pre">=</span> <span class="pre">True</span></code>.</p>
</div>
<p>You can achieve the same in R by typing;</p>
<div class="highlight-R notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="nf">library</span><span class="p">(</span><span class="n">metawards</span><span class="p">)</span>
<span class="o">&gt;</span> <span class="n">bristol</span> <span class="o">&lt;-</span> <span class="n">metawards</span><span class="o">$</span><span class="nf">Ward</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;Bristol&quot;</span><span class="p">)</span>
<span class="o">&gt;</span> <span class="n">bristol</span><span class="o">$</span><span class="nf">add_workers</span><span class="p">(</span><span class="m">500</span><span class="p">)</span>
<span class="o">&gt;</span> <span class="n">bristol</span><span class="o">$</span><span class="nf">set_num_players</span><span class="p">(</span><span class="m">750</span><span class="p">)</span>
<span class="o">&gt;</span> <span class="n">london</span> <span class="o">&lt;-</span> <span class="n">metawards</span><span class="o">$</span><span class="nf">Ward</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;London&quot;</span><span class="p">)</span>
<span class="o">&gt;</span> <span class="n">london</span><span class="o">$</span><span class="nf">add_workers</span><span class="p">(</span><span class="m">8500</span><span class="p">)</span>
<span class="o">&gt;</span> <span class="n">london</span><span class="o">$</span><span class="nf">set_num_players</span><span class="p">(</span><span class="m">10000</span><span class="p">)</span>
<span class="o">&gt;</span> <span class="n">bristol</span><span class="o">$</span><span class="nf">add_workers</span><span class="p">(</span><span class="m">500</span><span class="p">,</span> <span class="n">destination</span><span class="o">=</span><span class="n">london</span><span class="p">)</span>
<span class="o">&gt;</span> <span class="n">london</span><span class="o">$</span><span class="nf">add_workers</span><span class="p">(</span><span class="m">100</span><span class="p">,</span> <span class="n">destination</span><span class="o">=</span><span class="n">bristol</span><span class="p">)</span>
<span class="o">&gt;</span> <span class="n">wards</span> <span class="o">=</span> <span class="n">metawards</span><span class="o">$</span><span class="nf">Wards</span><span class="p">()</span>
<span class="o">&gt;</span> <span class="n">wards</span><span class="o">$</span><span class="nf">add</span><span class="p">(</span><span class="n">bristol</span><span class="p">)</span>
<span class="o">&gt;</span> <span class="n">wards</span><span class="o">$</span><span class="nf">add</span><span class="p">(</span><span class="n">london</span><span class="p">)</span>
<span class="o">&gt;</span> <span class="nf">print</span><span class="p">(</span><span class="n">wards</span><span class="p">)</span>
<span class="p">[</span> <span class="nf">Ward</span><span class="p">(</span> <span class="n">info</span><span class="o">=</span><span class="n">Bristol</span><span class="p">,</span> <span class="n">id</span><span class="o">=</span><span class="m">1</span><span class="p">,</span> <span class="n">num_workers</span><span class="o">=</span><span class="m">1000</span><span class="p">,</span> <span class="n">num_players</span><span class="o">=</span><span class="m">750</span> <span class="p">),</span> <span class="nf">Ward</span><span class="p">(</span> <span class="n">info</span><span class="o">=</span><span class="n">London</span><span class="p">,</span> <span class="n">id</span><span class="o">=</span><span class="m">2</span><span class="p">,</span> <span class="n">num_workers</span><span class="o">=</span><span class="m">8600</span><span class="p">,</span> <span class="n">num_players</span><span class="o">=</span><span class="m">10000</span> <span class="p">)</span> <span class="p">]</span>
<span class="o">&gt;</span> <span class="n">results</span> <span class="o">&lt;-</span> <span class="n">metawards</span><span class="o">$</span><span class="nf">run</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="n">wards</span><span class="p">,</span> <span class="n">additional</span><span class="o">=</span><span class="m">5</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">R does not support adding individual ward objects together to get Wards</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="05_local_network.html" class="btn btn-neutral float-right" title="Specifying ward-local parameters" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="03_reticulate.html" class="btn btn-neutral float-left" title="Creating Networks in R" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
      <span class="lastupdated">
        Last updated on Aug 06, 2020.
      </span>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>