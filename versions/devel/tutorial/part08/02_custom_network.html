

<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Creating a Custom Network &mdash; MetaWards Documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/custom.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Creating Networks in R" href="03_reticulate.html" />
    <link rel="prev" title="Understanding the Model Network" href="01_networks.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html">
          

          
            
            <img src="../../_static/logo.jpg" class="logo" alt="Logo"/>
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
  <div id="version_box"></div>
</div>


          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../features.html">Features</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../install.html">Installation instructions</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../model_data.html">Model data</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Tutorial</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../index_part01.html">Part 1 - Modelling outbreaks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index_part02.html">Part 2 - Refining the model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index_part03.html">Part 3 - Customising the outbreak</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index_part04.html">Part 4 - Customising the output</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index_part05.html">Part 5 - Modelling multiple demographics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index_part06.html">Part 6 - Moving between demographics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index_part07.html">Part 7 - Different pathways for different demographics</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index_part08.html">Part 8 - Different networks for different demographics</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="01_networks.html">Understanding the Model Network</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Creating a Custom Network</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#network-file-formats">Network file formats</a></li>
<li class="toctree-l4"><a class="reference internal" href="#creating-and-editing-networks-in-python">Creating and editing Networks in Python</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="03_reticulate.html">Creating Networks in R</a></li>
<li class="toctree-l3"><a class="reference internal" href="04_using_custom.html">Using a Custom Network</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../fileformats/index.html">Input files and formats</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cluster_usage.html">Running on a cluster</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../support.html">Help and support</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devsupport.html">Developer Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../roadmap.html">Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../packaging.html">Packaging releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development.html">Developer’s guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../snaglist.html">Snag list</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../api/index.html">Documentation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html">Changelog</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../acknowledgements.html">Acknowledgements</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">MetaWards</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">Tutorial</a> &raquo;</li>
        
          <li><a href="../index_part08.html">Part 8 - Different networks for different demographics</a> &raquo;</li>
        
      <li>Creating a Custom Network</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="03_reticulate.html" class="btn btn-neutral float-right" title="Creating Networks in R" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="01_networks.html" class="btn btn-neutral float-left" title="Understanding the Model Network" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="creating-a-custom-network">
<h1>Creating a Custom Network<a class="headerlink" href="#creating-a-custom-network" title="Permalink to this headline">¶</a></h1>
<p>While the default networks supplied in <code class="docutils literal notranslate"><span class="pre">MetaWardsData</span></code> model the UK, there
is nothing to stop you creating your own network to model any country or
region. Indeed, you can use the concepts of <code class="docutils literal notranslate"><span class="pre">wards</span></code>, <code class="docutils literal notranslate"><span class="pre">workers</span></code> and
<code class="docutils literal notranslate"><span class="pre">players</span></code> in a more generic way to model lots of different environments,
e.g.</p>
<ul class="simple">
<li>Using wards to represent different university buildings, and then track
disease spread between buildings as staff and students move around.</li>
<li>Using wards to represent care homes, hospitals and homes in a single
region, and then model the motion of staff, patients and the general
population between these different environments.</li>
</ul>
<div class="section" id="network-file-formats">
<h2>Network file formats<a class="headerlink" href="#network-file-formats" title="Permalink to this headline">¶</a></h2>
<p>A lot of data needs to be loaded to define the network. There are two
file formats for specifying this data;</p>
<ol class="arabic simple">
<li><a class="reference internal" href="../../fileformats/network.html"><span class="doc">A set of fixed-format files</span></a> that
contain the data in a set of files that are contained in a single
directory. This is an older format that is used predominantly for
older model networks.</li>
<li>A JSON-format file that contains all of the data needed to describe the
network in a single file. This file should only be manipulated or
edited using the Python API described below.</li>
</ol>
</div>
<div class="section" id="creating-and-editing-networks-in-python">
<h2>Creating and editing Networks in Python<a class="headerlink" href="#creating-and-editing-networks-in-python" title="Permalink to this headline">¶</a></h2>
<p>The best way to create a new network is to use the Python API. A
<a class="reference internal" href="../../api/generated/metawards.Network.html#metawards.Network" title="metawards.Network"><code class="xref py py-class docutils literal notranslate"><span class="pre">Network</span></code></a> is edited or created via the
<a class="reference internal" href="../../api/generated/metawards.Wards.html#metawards.Wards" title="metawards.Wards"><code class="xref py py-class docutils literal notranslate"><span class="pre">Wards</span></code></a> class. This represents an editable collection
of individual <a class="reference internal" href="../../api/generated/metawards.Ward.html#metawards.Ward" title="metawards.Ward"><code class="xref py py-class docutils literal notranslate"><span class="pre">Ward</span></code></a> objects, each of which
represents a ward. The <a class="reference internal" href="../../api/generated/metawards.Ward.html#metawards.Ward" title="metawards.Ward"><code class="xref py py-class docutils literal notranslate"><span class="pre">Ward</span></code></a> provides functions
for setting the name and metadata for a ward, plus adding work and
play connections to other wards.</p>
<p>For example, we can interactively create a new <a class="reference internal" href="../../api/generated/metawards.Network.html#metawards.Network" title="metawards.Network"><code class="xref py py-class docutils literal notranslate"><span class="pre">Network</span></code></a>
using the <a class="reference internal" href="../../api/generated/metawards.Ward.html#metawards.Ward" title="metawards.Ward"><code class="xref py py-class docutils literal notranslate"><span class="pre">Ward</span></code></a> and <a class="reference internal" href="../../api/generated/metawards.Wards.html#metawards.Wards" title="metawards.Wards"><code class="xref py py-class docutils literal notranslate"><span class="pre">Wards</span></code></a> classes
in, e.g. ipython or a jupyter notebook;</p>
<p>First, we will import the necessary classes and create our
<a class="reference internal" href="../../api/generated/metawards.Wards.html#metawards.Wards" title="metawards.Wards"><code class="xref py py-class docutils literal notranslate"><span class="pre">Wards</span></code></a> object, which we will call <code class="docutils literal notranslate"><span class="pre">wards</span></code>;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">metawards</span> <span class="kn">import</span> <span class="n">Ward</span><span class="p">,</span> <span class="n">Wards</span><span class="p">,</span> <span class="n">Network</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wards</span> <span class="o">=</span> <span class="n">Wards</span><span class="p">()</span>
</pre></div>
</div>
<p>Next, we will create a <a class="reference internal" href="../../api/generated/metawards.Ward.html#metawards.Ward" title="metawards.Ward"><code class="xref py py-class docutils literal notranslate"><span class="pre">Ward</span></code></a> object to represent
Bristol (which we will call <code class="docutils literal notranslate"><span class="pre">bristol</span></code>). We will give this the ID
number of <code class="docutils literal notranslate"><span class="pre">1</span></code>, and will add <em class="xref py py-obj">500</em>
workers who will work in Bristol, and <code class="docutils literal notranslate"><span class="pre">750</span></code> players.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">bristol</span> <span class="o">=</span> <span class="n">Ward</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Bristol&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bristol</span><span class="o">.</span><span class="n">add_workers</span><span class="p">(</span><span class="mi">500</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bristol</span><span class="o">.</span><span class="n">set_num_players</span><span class="p">(</span><span class="mi">750</span><span class="p">)</span>
</pre></div>
</div>
<p>Next, we will create a <a class="reference internal" href="../../api/generated/metawards.Ward.html#metawards.Ward" title="metawards.Ward"><code class="xref py py-class docutils literal notranslate"><span class="pre">Ward</span></code></a> object to represent
London (which we will call <code class="docutils literal notranslate"><span class="pre">london</span></code>). We will give this the ID
number of <code class="docutils literal notranslate"><span class="pre">2</span></code>, and will add <code class="docutils literal notranslate"><span class="pre">8600</span></code>
workers and <code class="docutils literal notranslate"><span class="pre">10000</span></code> players.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">london</span> <span class="o">=</span> <span class="n">Ward</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;London&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">london</span><span class="o">.</span><span class="n">add_workers</span><span class="p">(</span><span class="mi">8500</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">london</span><span class="o">.</span><span class="n">set_num_players</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You are free to use whatever ID number you wish, as long as it is positive
and greater or equal to 1. For efficiency, you should identify the
wards using ID numbers that start from 1 and increase consecutively.</p>
</div>
<p>Now, we will add some commuters. We will have <code class="docutils literal notranslate"><span class="pre">500</span></code> Bristolians
commute each day to London (<code class="docutils literal notranslate"><span class="pre">destination=2</span></code>), while <code class="docutils literal notranslate"><span class="pre">100</span></code> Londoners
will commute each day to Bristol (<code class="docutils literal notranslate"><span class="pre">destination=1</span></code>)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">bristol</span><span class="o">.</span><span class="n">add_workers</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span> <span class="n">destination</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">london</span><span class="o">.</span><span class="n">add_workers</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="n">destination</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>We can confirm that the information is correct by printing, e.g.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">bristol</span><span class="p">)</span>
<span class="go">Ward( id=1, name=Bristol, num_workers=1000, num_players=750 )</span>

<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">london</span><span class="p">)</span>
<span class="go">Ward( id=2, name=London, num_workers=8600, num_players=10000 )</span>
</pre></div>
</div>
<p>Next, we add the two <a class="reference internal" href="../../api/generated/metawards.Ward.html#metawards.Ward" title="metawards.Ward"><code class="xref py py-class docutils literal notranslate"><span class="pre">Ward</span></code></a> objects to our
<a class="reference internal" href="../../api/generated/metawards.Wards.html#metawards.Wards" title="metawards.Wards"><code class="xref py py-class docutils literal notranslate"><span class="pre">Wards</span></code></a> object that represents the entire model.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">wards</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">bristol</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wards</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">london</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">wards</span><span class="p">)</span>
<span class="go">[ Ward( id=1, name=Bristol, num_workers=1000, num_players=750 ), Ward( id=2, name=London, num_workers=8600, num_players=10000 ) ]</span>
</pre></div>
</div>
<p>We can now save this set of <a class="reference internal" href="../../api/generated/metawards.Wards.html#metawards.Wards" title="metawards.Wards"><code class="xref py py-class docutils literal notranslate"><span class="pre">Wards</span></code></a> to a file by converting
this to a data dictionary, and then serialising that dictionary to JSON,
which we will stream to the file <code class="docutils literal notranslate"><span class="pre">custom_network.json.bz2</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">wards</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="s2">&quot;custom_network.json&quot;</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>The resulting JSON file will look something like this;</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;info&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Bristol&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;num_workers&quot;</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
    <span class="s2">&quot;num_players&quot;</span><span class="p">:</span> <span class="mi">750</span><span class="p">,</span>
    <span class="s2">&quot;workers&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;destination&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="mi">1</span><span class="p">,</span>
        <span class="mi">2</span>
      <span class="p">],</span>
      <span class="s2">&quot;population&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="mi">500</span><span class="p">,</span>
        <span class="mi">500</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="s2">&quot;info&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;London&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;num_workers&quot;</span><span class="p">:</span> <span class="mi">8600</span><span class="p">,</span>
    <span class="s2">&quot;num_players&quot;</span><span class="p">:</span> <span class="mi">10000</span><span class="p">,</span>
    <span class="s2">&quot;workers&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;destination&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="mi">1</span><span class="p">,</span>
        <span class="mi">2</span>
      <span class="p">],</span>
      <span class="s2">&quot;population&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="mi">100</span><span class="p">,</span>
        <span class="mi">8500</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Note that the exact format of the JSON will change as <code class="docutils literal notranslate"><span class="pre">metawards</span></code>
evolves. We will retain backwards compatibility, meaning that newer
versions of <code class="docutils literal notranslate"><span class="pre">metawards</span></code> will be able to read old files, but older
versions may not be able to read new files.</p>
<p>Note that the file will be automatically compressed using bzip2. You
can disable this by setting <code class="docutils literal notranslate"><span class="pre">auto_bzip=False</span></code>.</p>
<p class="last">Note also that <code class="docutils literal notranslate"><span class="pre">indent=2</span></code> just sets the indentation used for printing.
You can set whatever indentation you want, including not setting any.
It won’t affect the included information - just its human-readability.</p>
</div>
<p>You can load this JSON file into a Wards object using;</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">wards</span> <span class="o">=</span> <span class="n">Wards</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="s2">&quot;custom_network.json.bz2&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">wards</span><span class="p">)</span>
<span class="go">[ Ward( id=1, name=Bristol, num_workers=1000, num_players=750 ), Ward( id=2, name=London, num_workers=8600, num_players=10000 ) ]</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="03_reticulate.html" class="btn btn-neutral float-right" title="Creating Networks in R" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="01_networks.html" class="btn btn-neutral float-left" title="Understanding the Model Network" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
      <span class="lastupdated">
        Last updated on Jul 10, 2020.
      </span>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>